@if (type === 'bar') {
  <div class="chips-bar-container">
    <mat-chip-set>
      @for (filter of filters; track filter.id) {
        <mat-chip
          class="chip"
          [class.selected]="selectedChipId() === filter.id"
          [class.disabled]="filter.disabled"
          (click)="selectChip(filter.id)"
          [matTooltip]="buildDisplayText(filter)"
          matTooltipPosition="below"
        >
          <span class="chip-text" [class.truncated]="isTruncated(filter)">
            {{ buildDisplayText(filter) }}
          </span>
          @if (!filter.disabled) {
            <mat-icon
              matChipRemove
              class="chip-remove-icon"
              (click)="removeFilter(filter.id); $event.stopPropagation();"
            >close</mat-icon>
          }
        </mat-chip>
      }
    </mat-chip-set>
  </div>
} @else {
  <div class="chips-dropdown-container">
    <div class="chips-dropdown-header" (click)="toggleExpanded()">
      <span class="chips-dropdown-title">Selected Filters</span>
      <div class="chips-dropdown-header-right">
        <span class="chips-dropdown-count">{{ filters.length }}</span>
        <mat-icon class="chips-dropdown-toggle-icon">
          {{ isExpanded() ? 'keyboard_arrow_up' : 'keyboard_arrow_down' }}
        </mat-icon>
      </div>
    </div>
    @if (isExpanded()) {
      <div class="chips" [class.expanded]="isExpanded()">
        <mat-chip-set>
          @for (filter of filters; track filter.id) {
            <mat-chip
              class="chip"
              [class.selected]="selectedChipId() === filter.id"
              [class.disabled]="filter.disabled"
              (click)="selectChip(filter.id)"
              [matTooltip]="buildDisplayText(filter)"
              matTooltipPosition="below"
            >
              <span class="chip-text" [class.truncated]="isTruncated(filter)">
                {{ buildDisplayText(filter) }}
              </span>
              @if (!filter.disabled) {
                <mat-icon
                  matChipRemove
                  class="chip-remove-icon"
                  (click)="removeFilter(filter.id); $event.stopPropagation();"
                >cancel</mat-icon>
              }
            </mat-chip>
          }
        </mat-chip-set>
      </div>
    }
  </div>
}
